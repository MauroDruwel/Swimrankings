# API Reference

Complete reference for all classes, methods, and functions in the SwimRankings library.

## Classes

### Athletes

The main class for searching athletes on swimrankings.net.

```python
class Athletes:
    def __init__(
        self,
        name: str,
        gender: str = "all",
        club_id: int = -1,
        timeout: int = 30,
    ) -> None
```

#### Parameters

- **name** (`str`): Last name to search for (required)
- **gender** (`str`, optional): Gender filter. Options: `"all"`, `"male"`, `"female"`. Default: `"all"`
- **club_id** (`int`, optional): Club ID filter. Use `-1` for all clubs. Default: `-1`
- **timeout** (`int`, optional): Request timeout in seconds. Default: `30`

#### Methods

##### `__iter__() -> Iterator[Athlete]`

Iterate over the athletes found in the search.

```python
athletes = Athletes(name="Smith")
for athlete in athletes:
    print(athlete.full_name)
```

##### `__len__() -> int`

Return the number of athletes found.

```python
athletes = Athletes(name="Smith")
count = len(athletes)
```

##### `__getitem__(index: Union[int, slice]) -> Union[Athlete, List[Athlete]]`

Access athletes by index or slice.

```python
athletes = Athletes(name="Smith")
first = athletes[0]           # Get first athlete
last = athletes[-1]          # Get last athlete
subset = athletes[0:3]       # Get first 3 athletes
```

##### `__bool__() -> bool`

Return `True` if any athletes were found.

```python
athletes = Athletes(name="Smith")
if athletes:
    print("Athletes found!")
```

##### `filter_by_country(country_code: str) -> List[Athlete]`

Filter athletes by country code.

```python
athletes = Athletes(name="Smith")
usa_athletes = athletes.filter_by_country("USA")
```

**Parameters:**
- **country_code** (`str`): Country code to filter by (e.g., "USA", "BEL")

**Returns:**
- `List[Athlete]`: List of athletes from the specified country

##### `filter_by_birth_year(min_year: int, max_year: Optional[int] = None) -> List[Athlete]`

Filter athletes by birth year range.

```python
athletes = Athletes(name="Smith")

# Filter by single year
born_2008 = athletes.filter_by_birth_year(2008)

# Filter by year range
young_athletes = athletes.filter_by_birth_year(2005, 2015)
```

**Parameters:**
- **min_year** (`int`): Minimum birth year (inclusive)
- **max_year** (`Optional[int]`): Maximum birth year (inclusive). If `None`, uses `min_year`

**Returns:**
- `List[Athlete]`: List of athletes within the birth year range

##### `filter_by_gender(gender: str) -> List[Athlete]`

Filter athletes by gender.

```python
athletes = Athletes(name="Smith")
male_athletes = athletes.filter_by_gender("male")
```

**Parameters:**
- **gender** (`str`): Gender to filter by (`"male"` or `"female"`)

**Returns:**
- `List[Athlete]`: List of athletes of the specified gender

##### `to_dict() -> List[dict]`

Convert all athletes to a list of dictionaries.

```python
athletes = Athletes(name="Smith")
athletes_data = athletes.to_dict()
```

**Returns:**
- `List[dict]`: List of dictionaries containing athlete data

---

### Athlete

Represents a single athlete with their information.

```python
class Athlete:
    def __init__(
        self,
        athlete_id: int,
        full_name: str,
        birth_year: int,
        gender: str,
        country: str,
        club: str,
        profile_url: str,
    ) -> None
```

#### Properties

##### `athlete_id: int`

Unique athlete identifier from swimrankings.net.

##### `full_name: str`

Full name in "Last, First" format.

##### `first_name: str`

First name extracted from full name.

```python
athlete = Athlete(...)
print(athlete.first_name)  # "John"
```

##### `last_name: str`

Last name extracted from full name.

```python
athlete = Athlete(...)
print(athlete.last_name)  # "Smith"
```

##### `birth_year: int`

Birth year of the athlete.

##### `gender: str`

Gender of the athlete (`"male"` or `"female"`).

##### `country: str`

Country code (e.g., "USA", "BEL", "GBR").

##### `club: str`

Full club name including country prefix.

##### `profile_url: str`

##### `profile_url: str`

Direct URL to the athlete's profile page on swimrankings.net.

#### Methods

##### `get_details(timeout: int = 30) -> AthleteDetails`

Fetch detailed information about the athlete including personal bests.

```python
athlete = athletes[0]
details = athlete.get_details()

print(f"Personal bests: {len(details.personal_bests)}")
for pb in details.personal_bests:
    print(f"  {pb.event} ({pb.course}): {pb.time}")
```

**Parameters:**
- **timeout** (`int`, optional): Request timeout in seconds. Default: `30`

**Returns:**
- `AthleteDetails`: Object containing personal bests and profile information

**Raises:**
- `NetworkError`: If there's a network connection issue
- `ParseError`: If the response cannot be parsed

##### `__str__() -> str`

String representation of the athlete.

```python
athlete = Athlete(...)
print(str(athlete))  # "SMITH, John (2000) - USA"
```

##### `__repr__() -> str`

Detailed string representation for debugging.

```python
athlete = Athlete(...)
print(repr(athlete))
# "Athlete(id=123, name='SMITH, John', birth_year=2000, gender='male', country='USA', club='USA - Some Club')"
```

##### `__eq__(other: object) -> bool`

Check equality based on athlete ID.

```python
athlete1 = Athlete(id=123, ...)
athlete2 = Athlete(id=123, ...)
print(athlete1 == athlete2)  # True
```

##### `__hash__() -> int`

Hash based on athlete ID for use in sets and dictionaries.

```python
athletes_set = {athlete1, athlete2}  # Works because Athlete is hashable
```

---

### PersonalBest

Represents a personal best time for a specific event.

```python
@dataclass
class PersonalBest:
    event: str
    course: str
    time: str
    date: Optional[str] = None
    meet: Optional[str] = None
    location: Optional[str] = None
```

#### Attributes

##### `event: str`

Event name (e.g., "50m freestyle", "100m butterfly").

##### `course: str`

Course type - typically "SCM" (Short Course Meters), "LCM" (Long Course Meters), or "SCY" (Short Course Yards).

##### `time: str`

Time in swimming format (e.g., "24.50", "1:02.45", "15:32.10").

##### `date: Optional[str]`

Date when the time was achieved (optional).

##### `meet: Optional[str]`

Name of the meet where the time was achieved (optional).

##### `location: Optional[str]`

Location where the time was achieved (optional).

---

### AthleteDetails

Detailed information about an athlete including personal bests and profile data.

```python
@dataclass
class AthleteDetails:
    athlete_id: int
    personal_bests: List[PersonalBest]
    profile_info: Dict[str, Any]
    last_updated: datetime
```

#### Attributes

##### `athlete_id: int`

Unique athlete identifier matching the original `Athlete` object.

##### `personal_bests: List[PersonalBest]`

List of personal best times for various events.

```python
details = athlete.get_details()
for pb in details.personal_bests:
    print(f"{pb.event}: {pb.time} ({pb.course})")
```

##### `profile_info: Dict[str, Any]`

Additional profile information extracted from the athlete's detail page.

```python
details = athlete.get_details()
for key, value in details.profile_info.items():
    print(f"{key}: {value}")
```

##### `last_updated: datetime`

Timestamp when the details were last fetched from swimrankings.net.

```python

---

## Exceptions

### SwimRankingsError

Base exception for all SwimRankings library errors.

```python
class SwimRankingsError(Exception):
    pass
```

### NetworkError

Raised when there's a network-related error.

```python
class NetworkError(SwimRankingsError):
    pass
```

**Common causes:**
- No internet connection
- Server is down
- Request timeout
- DNS resolution failure

### AthleteNotFoundError

Raised when no athletes are found for the given search criteria.

```python
class AthleteNotFoundError(SwimRankingsError):
    pass
```

### InvalidGenderError

Raised when an invalid gender value is provided.

```python
class InvalidGenderError(SwimRankingsError):
    pass
```

**Valid gender values:** `"all"`, `"male"`, `"female"`

### ParseError

Raised when there's an error parsing the response from swimrankings.net.

```python
class ParseError(SwimRankingsError):
    pass
```

---

## Constants

### Gender Mapping

Internal mapping used for API calls:

```python
GENDER_MAP = {
    "all": -1,
    "male": 1,
    "female": 2,
}
```

### Base URL

The base URL for swimrankings.net API:

```python
BASE_URL = "https://www.swimrankings.net/index.php"
```

---

## Type Hints

The library provides comprehensive type hints for better IDE support:

```python
from typing import List, Optional, Iterator, Union
from swimrankings import Athletes, Athlete

# Type hints are included for all public methods
athletes: Athletes = Athletes(name="Smith")
athlete_list: List[Athlete] = list(athletes)
first_athlete: Athlete = athletes[0]
filtered: List[Athlete] = athletes.filter_by_country("USA")
```
